# GitHubApps: Discord-to-GitHub Workflows (English)

[日本語のREADMEはこちら](README.md)

## Overview
This project turns whatever you write or drop into Discord into durable knowledge in GitHub (and then Obsidian). It creates a GitHub Issue from Discord messages/files, and optionally formats/summarizes the text and saves a Markdown file under  so Obsidian can sync it.

The system supports two operation modes depending on who controls API keys and where LLM processing runs.

## Modes at a Glance
- Bot Mode (low latency, dev/personal):
  - The Discord bot performs formatting/summarization/Tweet candidates and creates the Issue (or Gist for large files).
  - Per‑guild OpenAI keys are stored in the bot’s SecretStore ().
  - Best for demos, personal use, and fast feedback.
- Workflow Mode (secure, production):
  - The bot only collects input and creates the Issue; all LLM work runs in the user’s GitHub Actions using repository Secrets.
  - API keys never touch the bot. Execution is auditable in Actions logs and commits.
  - Best for organizations and compliance.

Recommended hybrid: In Workflow mode, the bot can show instant non‑LLM “quick hints,” while high‑quality LLM results are generated by Actions on demand (labels or manual run).

## Data Flow
- Discord → Bot creates Issue (Gist if >512KB)
- Issue event → GitHub Actions:
  - Parse Issue → save Markdown to 
  - Optionally: brief summary (3–6 lines) or PREP/PAS formatted article
- Obsidian vault syncs  and files become ready to edit.

## Repository Layout (relevant parts)
- 
  -  → Save Issue body as Markdown into  and commit
  -  → Brief summary (3–6 lines), save to , comment to Issue
  -  → PREP formatting, save to , comment to Issue
  -  → PAS formatting, save to , comment to Issue
  -  → Optional A/B tweet candidates (label or manual)
-  → Uses  (default ) to write the Markdown
-  → Public, Obsidian‑synced articles (committed)
-  → Private operational data (gitignored)

## Triggers and Labels
- Save to : Issue opened/edited (workflow reads  and writes under ).
- Brief summary: add label  or run workflow manually.
- PREP formatting: add label  or run manually.
- PAS formatting: add label  or run manually.
- Tweet candidates (optional): add label  or run manually.

All three content workflows commit files as:
- 
- 
- 

## Security Model
- Bot Mode: keys live in the bot environment (per guild). Fast, but not ideal for multi‑tenant separation.
- Workflow Mode: keys live only in the user’s GitHub repository Secrets (e.g., ). The bot never sees them.
- Public vs private:  is committed;  is ignored and used for internal mappings/logs.

## Setup (quick)
1) Add the workflows under  (already included in this repo).
2) In your repo settings → Secrets and variables → Actions: add  if you intend to use summaries/formatting.
3) The bot will create Issues when you post in Discord. For additional processing, apply the labels above or run the workflows manually.

Notes:
- Default branch is assumed to be . If different, adjust the push step.
- Re‑run vs latest: GitHub re‑runs use the workflow from the original commit. To pick up changes, trigger a new event (e.g., edit the Issue) or use workflow_dispatch.

## Troubleshooting
- “Ignored by .gitignore”: only  is committed;  remains ignored by design.
- “No file found”: ensure  is passed (already set in the workflow) and the Issue has a non‑empty body.
- Latency in Actions: 20–90 seconds on hosted runners is common; consider self‑hosted if you need speed.

## License
MIT

